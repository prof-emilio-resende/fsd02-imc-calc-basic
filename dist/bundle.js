(()=>{"use strict";class t{constructor(t,e){if("number"!=typeof t||isNaN(t))throw Error("height is not a number");if("number"!=typeof e||isNaN(e))throw Error("height is not a number");if(t<=0||e<=0)throw Error("height and weight must be bigger than zero");this.height=t,this.weight=e,this.imc=null,this.imcDescription="N/A"}isValid(){return this.weight&&this.height}get height(){return this._height}set height(t){this._height=t}get weight(){return this._weight}set weight(t){this._weight=t}get imc(){return this._imc}set imc(t){this._imc=t}get imcDescription(){return this._imcDescription}set imcDescription(t){this._imcDescription=t}toObj(){return{height:this._height,weight:this._weight}}}class e extends class{constructor(){console.log(`initializing the ViewComponent... ${this.__proto__.constructor.name}`),this.state={},this.element=document.querySelector(this.__proto__.constructor.name)}onLoad(){this.paint()}paint(){this.element.innerHTML=this.render()}render(){throw new Error("Componentes precisam sobrescrever render()")}updateState(t){this.state=t,this.paint()}observe(t){const e=this;return t?new Proxy(t,{set(t,i,s,r){const n=Reflect.set(t,i,s);return e.updateState(t),n}}):t}}{constructor(){super(),this.state={person:new t(.1,.1)}}updateState(t){const e={...this.state,...t};super.updateState(e)}render(){return`<div class="result"><label>Seu IMC &eacute;:</label>${this.state.person.imc}&nbsp;<span id="imc">${this.state.person.imcDescription}</span></div>`}}class i{constructor(){}createRequest(t,e=""){return{method:t,headers:{"Content-Type":"application/json; charset=UTF-8;"},body:JSON.stringify(e)}}get(t,e){return fetch(`${t}${e}`)}post(t,e,i){const s=this.createRequest("POST",i);return fetch(`${t}${e}`,s)}}class s{constructor(){this.xhr=new i}async calculate(t){const e=await this.xhr.post("http://localhost:8080","/imc/calculate",t.toObj());return await e.json()}}class r{constructor(){this.imcDriver=new s}async calculate(t){return await this.imcDriver.calculate(t)}}!function(){var i=new e;const s=new r;window.onload=function(){console.log("loading..."),document.querySelector(".data .form .actions button.primary-action").addEventListener("click",function(){var e=document.getElementById("weight"),r=document.getElementById("height");const n=i.observe({person:new t(.1,.1)});return async function(i){console.log(i);var o=parseFloat(e.value),c=parseFloat(r.value),a=new t(c,o),h=await s.calculate(a);a.imc=h.imc,a.imcDescription=h.imcDescription,n.person=a}}()),i.onLoad()}}()})();